<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>Static Template</title>
        <script src="https://cdn.jsdelivr.net/npm/fhirclient/build/fhir-client.js"></script>
    </head>
    <body>
        <script>
            // navigator.registerProtocolHandler('web+apoteket-app-mock', 'http://localhost:8000/standalone_launch/launch.html?q=%s', 'Danish IPS');
            // navigator.registerProtocolHandler('web+apoteket-app-mock', 'http://localhost:8000/standalone_launch/launch.html?q=%s', 'Danish IPS');

            FHIR.oauth2.authorize({

                // The client_id that you should have obtained after registering a client at
                // the EHR.
                clientId: "mlapp_mock",


                // The scopes that you request from the EHR
                scope: [
                    /*
                    "launch",           // Get the launch context in EHR launch mode
                    "launch/patient",   // Get the current patient in standalone launch mode
                    "launch/encounter", // Get the current encounter in standalone launch mode
                    "openid fhirUser",  // Get the current user
                    "patient/*.read"    // Read patient data
                    */
                    "openid",
                    "profile",
                    "sosi-sts",
                    "fmk",
                    "ddv",
                    "minlog"
                ].join(" "),

                // Having this option means that it makes a standalone launch. This is to make
                // this demo usable out of the box, but it can still to EHR launch if "iss" and
                // "launch" url parameters are passed.
                // iss: "https://gravitate-ips.gravitate.tcs.trifork.dev/fhir",
                // iss: "http://10.67.0.221:8080",
                iss: "https://gravitate-ips.gravitate.tcs.trifork.dev",

                // Typically, if your redirectUri points to the root of the current directory
                // (where the launchUri is), you can omit this option because the default
                // value is ".". However, some servers (like this one) do not support directory
                // indexes so "." and "./" will not automatically map to the "index.html" file
                // in that directory.
                // redirectUri: "index.html"
                // redirectUri: "file:///Users/mikael/GitHub/ipa-test-app/browser/standalone_launch/index.html"                
                // redirectUri: "index.html"
                redirectUri: "http://localhost:8000/browser/standalone_launch/index.html"
            });
        </script>
    </body>
</html>
